<!-- Lista de próximas cobranças com badges de urgência -->
<div class="mt-6 space-y-3">
    @for (cobranca of cobrancas; track cobranca.loanId + '-' + cobranca.paymentNumber) {
    @let emprestimo = buscarEmprestimoPorId(cobranca.loanId);
    <div
        class="bg-white p-4 rounded-lg border border-slate-200 shadow-sm grid grid-cols-2 md:grid-cols-6 items-center gap-4">
        <!-- Nome e número da parcela -->
        <div class="md:col-span-2">
            <p class="font-bold text-lg text-slate-900">{{ cobranca.borrowerName }}</p>
            <p class="text-xs text-slate-500">Parcela {{ cobranca.paymentNumber }} de {{ cobranca.totalPayments }}</p>
        </div>
        <!-- Valor da parcela -->
        <div>
            <p class="text-xs text-slate-500">Valor</p>
            <p class="font-semibold text-blue-600">{{ cobranca.amount | currency:'BRL' }}</p>
        </div>
        <!-- Data de vencimento -->
        <div>
            <p class="text-xs text-slate-500">Vencimento</p>
            <p class="font-semibold text-slate-700">{{ cobranca.dueDate | date:'dd/MM/yyyy' }}</p>
        </div>
        <!-- Badge de urgência -->
        <div class="text-right md:text-center">
            @if (cobranca.daysRemaining === 0) {
            <span class="px-3 py-1.5 text-sm font-bold text-red-700 bg-red-100 rounded-full">Vence hoje</span>
            } @else if (cobranca.daysRemaining === 1) {
            <span class="px-3 py-1.5 text-sm font-bold text-yellow-800 bg-yellow-100 rounded-full">Vence amanhã</span>
            } @else {
            <span class="px-3 py-1.5 text-sm font-bold rounded-full"
                [class]="cobranca.daysRemaining <= 7 ? 'text-yellow-800 bg-yellow-100' : 'text-green-700 bg-green-100'">
                Vence em {{ cobranca.daysRemaining }} dias
            </span>
            }
        </div>
        <!-- Botão de registrar pagamento -->
        <div class="col-span-2 md:col-span-1 md:text-right">
            @if(emprestimo) {
            <button (click)="registrarPagamento.emit(emprestimo)"
                class="w-full md:w-auto bg-white border border-slate-200 hover:bg-slate-50 text-slate-700 font-semibold py-2 px-4 rounded-lg transition-colors duration-300 text-sm">
                Registrar
            </button>
            }
        </div>
    </div>
    } @empty {
    <div class="text-center py-16 bg-white border border-slate-200 rounded-lg">
        <p class="text-slate-500">Nenhuma cobrança futura encontrada.</p>
        <p class="text-slate-400">Todos os pagamentos estão em dia ou não há empréstimos ativos.</p>
    </div>
    }
</div>